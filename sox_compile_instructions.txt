This guide helps you compile a custom version of sox.
To do that, we need to set up the dependencies.

Step 1:
Extract sox_installation.tar.gz and mv directory 'local' to ~
Skip step 2 (manual dependency installation) and go to step 3.


Step 2:
Download the dependencies.

# https://www.xiph.org/downloads/
# e.g. LAME:
wget -O lame-3.99.5.tar.gz "http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Flame%2Ffiles%2Flame%2F3.99%2F&ts=1416316457&use_mirror=kent"

tar -xf lame-3.99.5.tar.gz
cd lame-3.99.5
./configure --prefix=/home/dan/local
make clean
make install

do the same for:
FLAC: https://ftp.osuosl.org/pub/xiph/releases/flac/
MAD: https://sourceforge.net/projects/mad/files/libmad/0.15.1b/libmad-0.15.1b.tar.gz/download
MAD compilation error: https://stackoverflow.com/questions/16835803/gcc-error-unrecognized-command-line-option-fforce-mem
# Step 3:
Compiling sox.

Add to ~/.bashrc and source it:
export PKG_CONFIG="/home/dan/local/lib/pkgconfig"
export PKG_CONFIG_PATH="/home/dan/local/lib/pkgconfig"

export LD_LIBRARY_PATH=/home/dan/local/lib:/home
export PATH=${PATH}:/home/dan/local/bin

export FLAC_CFLAGS="-I/home/dan/flac-1.4.3/include"
export FLAC_LIBS="-L/home/dan/local/lib -lFLAC"



git clone https://github.com/rhgg2/sox.git
cd ~/sox

# install from apt:
# install libtool
# install autoconf
# install pkg-config
# install g++
# install autoconf-archive
# install make

autoreconf -ivf

# from http://akshayc.com/blog/build-sox-from-scratch/, run:
./configure LDFLAGS=-L/home/dan/local/lib \
	    CFLAGS=-I/home/dan/local/include \
	    --prefix=/home/dan/local --with-mad --with-lame --enable-mp3 --enable-flac
make -s
make install

